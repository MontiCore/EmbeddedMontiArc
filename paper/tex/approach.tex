\subsection{Stream Testing}
To address \textbf{RQ1} and \textbf{RQ3} two groups were assigned the task to model a Controller for PacMan and SuperMario respectively and interview the results afterwards. In the future the groups will be referred to as \textit{group A} and \textit{group B}. Group A consists of one subject who is familiar with EmbeddedMontiArc and group B consists of two subjects who have no experience with EmbeddedMontiArc. These groups were selected random among the students of a computer science seminar. 

EmbeddedMontiArc comes along with stream tests in order to check a component against a condition as stated in the previous chapter.
We can use those tests to define the conditions the controllers need to fulfill. Those conditions are taken from use cases scenarios. For PacMan the most general acceptance test would be to never let the PacMan die. Due to the fact that stream tests cannot be defined unlimited and that this test might be hard to fulfill the following deterministic tests for PacMan and SuperMario were defined.

\subsubsection{PacMan}
The tests are taken from use case scenarios as stated before. In this section the process of deriving the stream test from a scenario is presented once and then a few conditions are framed. \newline

\emph{Deriving a Stream Test} \newline
In fig. \ref{fig:pacManFleeing} a scenario is shown where the only option for PacMan is to flee to the left in order to not collide with the pink and blue ghost. The values of the ghosts and PacMan are partially listed in listing \ref{lst:pmStreamValues}. Together with the other values this concludes to the stream test shown below \ref{lst:pmStreamTest}.
\begin{figure}[!h]
	\centering
	\subfigure[]{\includegraphics[width=0.49\textwidth]{pictures/PacMan/StreamTests/2/Bild1.PNG}} 
	\subfigure[] {\includegraphics[width=0.49\textwidth]{pictures/PacMan/StreamTests/2/Bild2.PNG}} 
	\subfigure[]{\includegraphics[width=0.49\textwidth]{pictures/PacMan/StreamTests/2/Bild3.PNG}} 
	\subfigure[]{\includegraphics[width=0.49\textwidth]{pictures/PacMan/StreamTests/2/Bild4.PNG}} 
	\caption{PacMan has to move left to avoid colliding with the ghosts} 
	\label{fig:pacManFleeing}
\end{figure}
\begin{lstlisting}[caption={Values for the stream test},label=lst:pmStreamValues, frame=single]
(a)
  PacMan: (15m, 17.2m) 
  Pink Ghost: (17m, 19m) 
  BlueGhost: (15m, 14.8m) 
  newDir: 0
(b)	
  PacMan: (15m, 17m) 
  Pink Ghost: (16.8m, 19m) 
  BlueGhost: (15m, 15m) 
  newDir: 0
(c)	
  PacMan: (14.8m, 17m) 
  Pink Ghost: (16.6m, 19m) 
  BlueGhost: (15m, 15.2m) 
  newDir: 2
(d)	
  PacMan: (14.6m, 17m) 
  Pink Ghost: (16.4m, 19m)
  BlueGhost: (15m, 15.4m)
  newDir: 2
\end{lstlisting}

\begin{lstlisting}[caption={Stream test for the scenario above},label=lst:pmStreamTest, frame=single, morekeywords={tick, stream, for, package}]
package de.rwth.pacman;
stream Test1 for PacManWrapper {
  ghostX: [5.4m,15m,17m,7m] tick [5.2m,15m, ...
  ghostY: [21m,14.8m,19m,17.2m] tick [21m,15m, ...
  ghostDirection: [2,1,2,1] tick [2,1,2,1] tick ...
  ghostEtable: [false, false, false, false] tick ...
  ghostEaten: [false, false, false, false] tick ...
  pacManX: 15m tick 15m tick 14.8m tick 14.6m;
  pacManY: 17.2m tick 17m tick 17m tick 17m;
  pacManEaten: false tick false tick false tick false;
  pacManLives: 3 tick 3 tick 3 tick 3;
  pacManScore: 0 tick 0 tick 0 tick 0;
  map: [0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0; ...
  newPacManDirection: 0 tick 0 tick 2 tick 2;
}
\end{lstlisting}

\emph{Some other tests}
\begin{itemize}
	\item If PacMan is located at an intersection and ghosts are coming from two sides, PacMan should walk to a safe path.
	\item If PacMan is located at an intersection and ghosts are at the top path and are all eatable, PacMan should walk this path.
	\item If PacMan is located at an intersection
\end{itemize}

Those scenarios can be tested easily within a few ticks via stream testing.

\subsubsection{Supermario (by Philipp Haller)}
\input{approach-supermario}


\subsubsection{Supermario (by Mustafa Sezer)}
\begin{itemize}
	\item Given the scenario in fig. \ref{fig:marioLeft}, Mario has to build up speed in order to jump over the obstacle.
	\item Given the scenario in fig. \ref{fig:marioSmashHead}, Mario has to jump in order to get coins, mushrooms or flowers.
	\item Given the scenario in fig. \ref{fig:marioEat}, Mario has to eat the mushroom in order to grow.
	\item Given the scenario in fig. \ref{fig:marioFight}, Mario has to jump on the evil mushrooms or evade them.
\end{itemize}

\begin{figure}[!h]
	\centering
	\includegraphics[scale=0.55]{pictures/Mario1.PNG}
	\caption{Mario has to go left in order jump over the obstacle}
	\label{fig:marioLeft}
\end{figure}
\begin{figure}[!h]
	\centering
	\includegraphics[scale=0.55]{pictures/Mario2.PNG}
	\caption{Mario with loot boxes over him}
	\label{fig:marioSmashHead}
\end{figure}
\begin{figure}[!h]
	\centering
	\includegraphics[scale=0.55]{pictures/Mario3.PNG}
	\caption{Mario with a mushroom}
	\label{fig:marioEat}
\end{figure}
\begin{figure}[!h]
	\centering
	\includegraphics[scale=0.55]{pictures/Mario4.PNG}
	\caption{Mario with enemies}
	\label{fig:marioFight}
\end{figure}

\subsection{Preparations (by Haller and Heithoff)}
The Code of the PacMan emulator \cite{pacmanLink} and SuperMario emulator \cite{marioLink} we used was available in Html5 and JavaScript. C\&C-Components in EmbeddedMontiArc can be translated to C++ code and then to a web assembly (using Emscripten \cite{emscirpten}) which uses JavaScript (see \cite{bertram2017component}). This JavaScript file can be given inputs according to the component and calculates the outputs on execution. To combine these two files, there is an additional interface needed to extract the information for the inputs out of the emulator and then give the calculated outputs into the emulator.
For the purpose of implementing the controllers the subjects were assigned to use the EmbeddedMontiArcStudio.
EmbeddedMontiArcStudioV1.6.2 did neither support a simulator of PacMan nor of a simulator SuperMario. So an additional step to answer RQ2 \textit{Is it possible to integrate other simulators in a recent amount of work} it for the groups to integrate the simulators into the EmbeddedMontiArcStudio.

In order to be able to do so, group A is instructed by an expert (Jean-Marc) which files need modification and what to add. After that group A instructed group B the same way.

