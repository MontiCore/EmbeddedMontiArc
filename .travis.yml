script:
- rm -rf "projects"
- git clone --depth 1 "https://github.com/EmbeddedMontiArc/EmbeddedMontiArc" "projects/EmbeddedMontiArc"
- git clone --depth 1 "https://github.com/EmbeddedMontiArc/EmbeddedMontiArcMath" "projects/EmbeddedMontiArcMath"
- mvn clean install --settings "./settings.xml"
# curl "https://api.github.com/orgs/EmbeddedMontiArc/repos?per_page=200" | grep -e 'git_url*' | cut -d \" -f 4 | xargs -L1 git clone
after_success:
- mvn deploy --debug --settings "./settings.xml"
- java -jar target/reporting-0.0.3-SNAPSHOT-REWORK-jar-with-dependencies.jar projects report/data -tt true
deploy:
  provider: pages
  skip_cleanup: true
  github_token: $GITHUB_TOKEN # Set in travis-ci.org dashboard
  on:
    branch: master
  localdir: report/data
  target_branch: gh-pages
after_deploy:
  run:
    - "rake cleanup"