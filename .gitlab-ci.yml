# (c) https://github.com/MontiCore/monticore
stages:
  - linux

BranchJobLinux:
  stage: linux
  image: registry.git.rwth-aachen.de/monticore/embeddedmontiarc/applications/carlacomponents/ros-maven
  script:
    - mvn -B  clean install --s settings.xml
  except:
    - master

MasterDeployJobLinux:
  stage: linux
  image: registry.git.rwth-aachen.de/monticore/embeddedmontiarc/applications/carlacomponents/ros-maven
  script:
    - mvn -Dorg.slf4j.simpleLogger.log.org.apache.maven.cli.transfer.Slf4jMavenTransferListener=warn -B clean deploy --s settings.xml
  only:
    - master
  except:
    changes:
      - .gitlab-ci.yml
      - .gitignore
      - README.md

pages:
  stage: linux
  image: registry.git.rwth-aachen.de/monticore/embeddedmontiarc/applications/carlacomponents/ros-maven
  script:
    - mvn clean site -s settings.xml
    - mv target/site/ public/
  artifacts:
    paths:
      - public
  except:
    changes:
      - .gitignore
      - README.md


