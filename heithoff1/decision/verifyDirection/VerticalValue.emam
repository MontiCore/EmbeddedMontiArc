package de.rwth.pacman.heithoff1.decision.verifyDirection;

import de.rwth.pacman.common.Switch;
import de.rwth.pacman.common.And;
import de.rwth.pacman.common.Equals;
import de.rwth.pacman.common.Constant;

component VerticalValue {
    ports
      in Z tryDirection,
      in Boolean topSafe,
      in Boolean bottomSafe,
      in Boolean leftSafe,
      in Boolean rightSafe,
      in Boolean topPossible,
      in Boolean bottomPossible,
      in Boolean leftPossible,
      in Boolean rightPossible,
      
      out Z newPacManDirection;

    instance And<2> condTop, condTop1, condBottom, condLeft, condRight;
    instance Equals condTop2;
    instance Constant<0> topDirection;
    instance Constant<1> bottomDirection;
    instance Constant<2> leftDirection;
    instance Constant<3> rightDirection;
    connect topSafe        -> condTop1.in1[1];
    connect topPossible    -> condTop1.in1[2];
    connect tryDirection   -> condTop2.in1;
    connect bottomDirection.out1 -> condTop2.in2;
    connect condTop1.out1  -> condTop.in1[1];
    connect condTop2.out1  -> condTop.in1[2];
    connect bottomSafe     -> condBottom.in1[1];
    connect bottomPossible -> condBottom.in1[2];
    connect leftSafe       -> condLeft.in1[1];
    connect leftPossible   -> condLeft.in1[2];
    connect rightSafe      -> condRight.in1[1];
    connect rightPossible  -> condRight.in1[2];

    instance Switch chooseTop, chooseBottom, chooseLeft, chooseRight;
    connect condTop.out1 -> chooseTop.cond;
    connect condBottom.out1 -> chooseBottom.cond;
    connect condLeft.out1 -> chooseLeft.cond;
    connect condRight.out1 -> chooseRight.cond;

    connect leftDirection.out1 -> chooseLeft.in1;
    connect chooseLeft.out1 -> newPacManDirection;
    connect rightDirection.out1 -> chooseRight.in1;
    connect chooseRight.out1 -> chooseLeft.in3;
    connect topDirection.out1 -> chooseTop.in1;
    connect chooseTop.out1 -> chooseRight.in3;
    connect bottomDirection.out1 -> chooseBottom.in1;
    connect chooseBottom.out1 -> chooseTop.in3;
    connect tryDirection -> chooseBottom.in3;
    
      
}