package test;
import test.structures.*;

component BumpBot{

	ports	out Ego_Vehicle test,
		in Quaternion orientation,
		in Vector3 collision_normale;

	implementation Math{
		static B collisionHappened = false;
		test.throttle = 1.0;
		test.brake = 0.0;
		test.hand_brake = false;
		test.reverse = false;
		test.gear = 1;
		test.manual_gear_shift = false;
		Q tmp = asin(orientation.z);
		if (1-(abs(tmp)/(M_PI/4)))*collision_normale.x + 2*tmp/(M_PI/4) * collision_normale.y > 0.0
				test.reverse = true;
		else
                                test.reverse = false;
		end			
	}
}
