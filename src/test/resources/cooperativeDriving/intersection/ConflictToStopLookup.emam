package cooperativeDriving.intersection;

//TODO: rename
//TODO: automatically calculate x: x = n(n+1)/2
//TODO: change Q to N
component ConflictToStopLookup<N1 n = 2,N1 x = 3>{

    port out Q indexLookup[x];

    implementation Math{
        Q^n counter;
        for i = 1:n
            counter(i) = 0;
        end

        Q k = 1;
        for i = 1:n-1
            for j = i+1:n
                counter(i) = counter(i) + 1;
                counter(j) = counter(j) + 1;

                if counter(i) <= counter(j)
                    indexLookup(k) = i;
                else
                    indexLookup(k) = j;
                end
                k = k + 1;
            end
        end
    }

}