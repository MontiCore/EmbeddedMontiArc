package simulator;

component DistanceToTrajectoryCalculator{
    ports in Q(-90°:90°) x[2],
          in Q(-180°:180°) y[2],
          in Q(-90°:90°) gpsX,
          in Q(-180°:180°) gpsY,
          out Q(-1000 m : 1000m) distance;

    implementation Math{
          Q res =(y(2) - y(1))*gpsX;
          res -= (x(2) - x(1))*gpsY;
          res += x(2) * y(1);
          res -= y(2) * x(1);
          Q xDiff = x(1) - x(2);
          Q yDiff = y(1) - y(2);
          res /= sqrt(xDiff*xDiff+yDiff*yDiff);

          distance = res;
    }
}