package de.rwth.pacman.heithoff2.coneSearch;

import de.rwth.pacman.heithoff2.coneSearch.coinSearch.*;
import de.rwth.pacman.heithoff2.coneSearch.enemySearch.*;

component ConeSearches {
    ports
      in Z^{22,19} map,
      in Z(-1m: 19m) currentX,
      in Z(0m: 22m) currentY,
      in Z(-1m: 19m) ghostX[4],
      in Z(0m: 22m) ghostY[4],
      in Z(0 : 1 : 3) ghostDirection[4],
      
      out Z topValue,
      out Z bottomValue,
      out Z leftValue,
      out Z rightValue;
      
      instance SearchCoinsTop coinsTop;
      instance SearchCoinsBottom coinsBottom;
      instance SearchCoinsLeft coinsLeft;
      instance SearchCoinsRight coinsRight;
      
      instance SearchEnemiesTop enemiesTop;
      instance SearchEnemiesBottom enemiesBottom;
      instance SearchEnemiesLeft enemiesLeft;
      instance SearchEnemiesRight enemiesRight;
      
      instance CombineValues combine1;
      instance CombineValues combine2;
      instance CombineValues combine3;
      instance CombineValues combine4;
      
      
      connect map -> coinsTop.map, coinsBottom.map, coinsLeft.map, coinsRight.map;
      connect ghostX[:] -> enemiesTop.ghostX[:], enemiesBottom.ghostX[:], enemiesLeft.ghostX[:], enemiesRight.ghostX[:];
      connect ghostY[:] -> enemiesTop.ghostY[:], enemiesBottom.ghostY[:], enemiesLeft.ghostY[:], enemiesRight.ghostY[:];
      connect currentX -> coinsTop.currentX, enemiesTop.currentX, coinsBottom.currentX, enemiesBottom.currentX, coinsLeft.currentX, enemiesLeft.currentX, coinsRight.currentX, enemiesRight.currentX;
      connect currentY -> coinsTop.currentY, enemiesTop.currentY, coinsBottom.currentY, enemiesBottom.currentY, coinsLeft.currentY, enemiesLeft.currentY, coinsRight.currentY, enemiesRight.currentY;
      
      connect coinsTop.value -> combine1.valueCoins;
      connect enemiesTop.value -> combine1.valueEnemies;
      connect coinsBottom.value -> combine2.valueCoins;
      connect enemiesBottom.value -> combine2.valueEnemies;
      connect coinsLeft.value -> combine3.valueCoins;
      connect enemiesLeft.value -> combine3.valueEnemies;
      connect coinsRight.value -> combine4.valueCoins;
      connect enemiesRight.value -> combine4.valueEnemies;
      
      connect combine1.value -> topValue;
      connect combine2.value -> bottomValue;
      connect combine3.value -> leftValue;
      connect combine4.value -> rightValue;
}